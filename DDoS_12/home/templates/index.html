{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>AttackNET ZERO</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'assets/favicon.ico' %}" />

    <!-- Font Awesome icons (free version) -->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&family=Roboto+Mono&display=swap" rel="stylesheet">

    <!-- Core theme CSS (includes Bootstrap) -->
    <link href="{% static 'css/app1/styless.css' %}" rel="stylesheet" />
    <script src="{% static 'js/scripts.js' %}"></script>   

    <style>
        #preloader {
          position: fixed;
          inset: 0;
          background: #000;
          color: #7cc576;
          display: flex;
          justify-content: center;
          align-items: center;
          flex-direction: column;
          z-index: 9999;
          font-family: 'Orbitron', sans-serif;
        }

        .loader-content {
          text-align: center;
        }

        #percentage {
          font-size: 2.5rem;
          margin-bottom: 20px;
          letter-spacing: 2px;
        }

        .loader-bar {
          width: 200px;
          height: 8px;
          background: #333;
          border-radius: 20px;
          overflow: hidden;
        }

        .bar-fill {
          height: 100%;
          width: 0%;
          background: #7cc576;
          transition: width 0.2s linear;
        }
        
        /* dot loading css */
        .loading-text .dots::after {
          content: '';
          display: inline-block;
          width: 1em;
          text-align: left;
          animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
          0%   { content: ''; }
          25%  { content: '.'; }
          50%  { content: '..'; }
          75%  { content: '...'; }
          100% { content: ''; }
        }
    </style>
</head>
<body>
{% block loader %}
    <!-- Add Loading Spinner HTML -->
    <div id="preloader">
      <div class="loader-content">
        <div id="percentage">0%</div>
        <div class="loader-bar"><div class="bar-fill"></div></div>
      </div>
    </div>
{% endblock %}

    <!-- Background Video -->
    <video class="bg-video" playsinline autoplay muted loop>
        <source src="{% static 'assets/mp4/bg.mp4' %}" type="video/mp4" />
    </video>
    

    <!-- Masthead -->
    <div class="masthead">
        <div class="masthead-content text-white">
            <div class="container-fluid px-lg-0">

              {% block content %}

                <h1 class="fst-italic lh-1 mb-4">AttackNET ZERO</h1>
                <p class="mb-5 loading-text">Turning the tide against cyber threats<span class="dots"></span></p>

                <!-- SB Forms Contact Form -->
                <form id="loginForm" method="post" action="{% url 'login' %}">
                  {% csrf_token %}
                  <!-- Step 1: Email -->
                  <div id="stepEmail">
                    <div class="row input-group-newsletter">
                      <div class="col">
                        <input class="form-control" id="email" name="email" type="email" placeholder="Enter Email Address" required />
                      </div>
                      <div class="col-auto">
                        <button class="btn btn-primary" type="button" id="nextBtn" disabled>Next</button>
                      </div>
                    </div>
                    <div class="invalid-feedback mt-2" id="emailError" style="display: none;">Valid email is required.</div>
                  </div>

                  <!-- Step 2: Password -->
                  <div id="stepPassword" class="d-none mt-3">
                    <div class="row input-group-newsletter">
                      <div class="col">
                        <input class="form-control" id="password" name="password" type="password" placeholder="Enter Password" required />
                      </div>
                      <div class="col-auto">
                        <button class="btn btn-primary" type="submit" id="loginSubmit" disabled>Login</button>
                      </div>
                    </div>
                    <div class="invalid-feedback mt-2" id="passwordError" style="display: none;">Password is required.</div>
                  </div>
                </form>

              {% endblock %}

            </div>
        </div>
    </div>
    
    <!-- Social Icons -->
    <div class="social-icons">
        <div class="d-flex flex-row flex-lg-column justify-content-center align-items-center h-100 mt-3 mt-lg-0">
            <a class="btn btn-dark m-3" href="{% url 'signup' %}" data-bs-toggle="tooltip" title="Sign up" data-bs-placement="left"><i class="fas fa-user-plus"></i></a>
            <a class="btn btn-dark m-3" href="https://twitter.com" data-bs-toggle="tooltip" title="Sign up with Twitter" data-bs-placement="left"><i class="fab fa-twitter"></i></a>
            <a class="btn btn-dark m-3" href="https://instagram.com" data-bs-toggle="tooltip" title="Sign up with Instagram" data-bs-placement="left"><i class="fab fa-instagram"></i></a>
            <a class="btn btn-dark m-3" href="https://facebook.com" data-bs-toggle="tooltip" title="Sign up with Facebook" data-bs-placement="left"><i class="fab fa-facebook-f"></i></a>
            <a class="btn btn-dark m-3" href="mailto:" data-bs-toggle="tooltip" title="Sign up with Gmail" data-bs-placement="left"><i class="fab fa-google"></i></a>
            <a class="btn btn-dark m-3" href="{% url 'hcontact' %}" data-bs-toggle="tooltip" title="Contact Us" data-bs-placement="left"><i class="fas fa-envelope"></i></a>
        </div>
    </div>

    <!-- Bootstrap core JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Core theme JS -->
    <script src="{% static 'js/scripts.js' %}"></script>
    <script>
        const nextBtn = document.getElementById("nextBtn");
        const loginBtn = document.getElementById("loginSubmit");
        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("password");
        const emailError = document.getElementById("emailError");
      
        // Enable the next button when a valid email is entered
        emailInput.addEventListener("input", () => {
          const email = emailInput.value.trim();
          nextBtn.disabled = !(email && email.includes("@"));
          emailError.style.display = email && email.includes("@") ? "none" : "block";
        });
      
        // Show password input step and hide email step
        nextBtn.addEventListener("click", () => {
          document.getElementById("stepEmail").classList.add("d-none");
          document.getElementById("stepPassword").classList.remove("d-none");
          passwordInput.focus();
        });
      
        // Enable the login button once password is entered
        passwordInput.addEventListener("input", () => {
          loginBtn.disabled = !passwordInput.value.trim();
        });
      
        // Handle form submission
        // document.getElementById("loginForm").addEventListener("submit", (e) => {
        //   e.preventDefault();
        //   console.log("Email:", emailInput.value);
        //   console.log("Password:", passwordInput.value);
        // });


  // Initialize Bootstrap tooltips
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
  });

      
     
      // Add Loading Spinner HTML
  // Only run this on full page loads
      document.addEventListener("DOMContentLoaded", () => {
        let percent = 0;
        const percentText = document.getElementById("percentage");
        const bar = document.querySelector(".bar-fill");
        const preloader = document.getElementById("preloader");

        const interval = setInterval(() => {
          percent++;
          percentText.textContent = percent + "%";
          bar.style.width = percent + "%";
          if (percent >= 100) {
            clearInterval(interval);
            setTimeout(() => {
              preloader.style.opacity = "0";
              setTimeout(() => preloader.style.display = "none", 300);
            }, 200);
          }
        }, 10);
      });
</script> 

{% if messages and login_page %}
  <div id="custom-tooltip" style="
    position: fixed;
    top: 20px;
    left: 65%;
    background: #333;
    color: #fff;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    z-index: 9999;
  ">
    {% for message in messages %}
      {{ message }}
    {% endfor %}
  </div>

  <script>
    const tooltip = document.getElementById('custom-tooltip');
    tooltip.style.opacity = '1';
    tooltip.style.pointerEvents = 'auto';

    setTimeout(() => {
      tooltip.style.opacity = '0';
      tooltip.style.pointerEvents = 'none';
    }, 4000);
  </script>
{% endif %}

</body>
</html>
